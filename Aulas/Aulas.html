<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Aulas.css">
    <title>Document</title>
    <script>
        // async function buscarTarefas() {
        //     const response = await fetch('https://localhost:7200/api/Tarefa',
        //         {
        //             method: "GET",
        //             headers: {
        //                 "content-type": "application/json; charset=utf-8" 
        //             }
        //         });
        //         const tarefas = response.json();
        //         return tarefas;
        //}
        // console.log(buscarTarefas());

        class Tarefa {
            constructor(id, description, isCompleted, daysAndTimes) {
                this.id = id;
                this.description = description
                this.isCompleted = isCompleted;
                this.daysAndTimes = {
                    dayOfWeek,
                    starTime,
                    endTime

                }

            }
        }
        fetch("https://localhost:7200/api/Tarefa/")
            .then(response => response.json())
            .then(tarefasJson => {
                console.log(tarefasJson)
                tarefasJson.tarefas.map((tarefa) => {
                    let tarefaClass = {
                        id: tarefa.id,
                        description: tarefa.description,
                        isCompleted: tarefa.isCompleted
                    }
                    let tarefasList = document.getElementById('table_tarefas')
                    let tarefaConcluida;
                    if (tarefaClass.isCompleted) {
                        tarefaConcluida = "Sim"
                    } else {
                        tarefaConcluida = "Não"
                    }
                    tarefasList.innerHTML += ` 
            <tbody id="table__body">
                <tr>
                    <td class="body__item">
                        10:00:00
                    </td>
                    <td class="body__item">
                        11:00:00
                    </td class="body__item">
                    <td class="body__item">
                        ${tarefa.description}
                    </td>
                    <td class="body__item daysWeek">                       
                        ${tarefa.daysAndTimes.map((dia) => `<div class="body__item-dayOfWeek">
                             ${(() => {
                            switch (dia.dayOfWeek) {
                                case 0:
                                    return "Segunda-Feira";
                                    break;
                                case 1:
                                    return "Terça-Feira"
                                    break;
                                case 2:
                                    return "Quarta-Feira"
                                    break;
                                case 3:
                                    return "Quinta-Feira"
                                    break;
                                case 4:
                                    return "Sexta-Feira"
                                    break;
                                case 5:
                                    return "Sábado"
                                    break;
                                case 6:
                                    return "Domingo"
                                    break;
                            }
                        })()}
                            </div>`).join(' ')}        
                    </td>
                </tr>
            </tbody>
        </table>`
                })
            })
    </script>
</head>

<body>
    <div class="dias__semana">
        <ul class="dias__semana-list">
            <li class="semana__list-item">
                Segunda-Feira
            </li>
            <li class="semana__list-item">Terça-Feira</li>
            <li class="semana__list-item">Quarta-Feira</li>
            <li class="semana__list-item">Quinta-Feira</li>
            <li class="semana__list-item">Sexta-Feira</li>
            <li class="semana__list-item">Sábado</li>
            <li class="semana__list-item">Domingo</li>
        </ul>
    </div>
    <div id="tarefas">
        <table id="table_tarefas" class="table__tarefas">
            <thead class="table__head">
                <tr>
                    <td>
                        Horário Inicial
                    </td>
                    <td>
                        Horário Final
                    </td>
                    <td>
                        Tarefa
                    </td>
                    <td>Dias da Semana</td>
                </tr>
            </thead>
    </div>
</body>

</html>